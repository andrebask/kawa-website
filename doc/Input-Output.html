<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Kawa: Input, output, and file handling</title>
<link rel="stylesheet" title="Kawa (navbar: fixed, left)" href="style/kawa-l.css" media="screen, print, projection, tv">
<link rel="alternate stylesheet" title="Kawa (navbar: fixed, right)" href="style/kawa-r.css" media="screen, print, projection, tv">
<link rel="alternate stylesheet" title="Single column, top navigation" href="style/kawa-1col.css" type="text/css" media="handheld, screen, print, projection, tv">

<link rel="home" href="toc.html" title="Kawa: The Kawa Scheme language">
<link rel="up" href="Documentation.html" title="Kawa: Documentation">
<link rel="prev" href="Debugging.html" title="Kawa: Debugging">
<link rel="next" href="Types.html" title="Kawa: Types">
<link rel="stylesheet" href="../kawa.css" type="text/css" media="all">
<link rel="stylesheet" href="../kawa-layout.css" type="text/css" media="all">
<link rel="stylesheet" href="../kawa.css" type="text/css" media="all">


<div class="header">
    <a href="../index.html"><img class="logo" src="kawa-logo.png"/></a>
    <h1><a href="../index.html">The Kawa Scheme Language</a></h1>
</div>

<body>
<div class="header">
    <a href="../index.html"><img class="logo" src="kawa-logo.png"/></a>
    <h1><a href="../index.html">The Kawa Scheme Language</a></h1>
</div>
<div class="content">
<div class="navcol">

<div class="navbar">
<ul>
<li><a href="toc.html">Table of Contents</a></li>
<li><a href="tutorial/index.html">Tutorial</a></li>
<li><a href="news.html">News: Recent changes</a></li>
</ul>
<div class="toc"><ul>
<li><a href="../index.html">The Kawa Scheme language</a></li>
<li><a href="Installation.html">Getting and installing Kawa</a></li>
<li><a href="Features.html">Features</a></li>
<li>
<a href="Documentation.html">Documentation</a><ul>
<li><a href="Running.html">Usage Reference</a></li>
<li><a href="Syntax.html">Syntax</a></li>
<li><a href="Program-structure.html">Program structure</a></li>
<li><a href="Multiple-values.html">Multiple values</a></li>
<li><a href="Symbols-and-namespaces.html">Symbols and namespaces</a></li>
<li><a href="Procedures.html">Procedures</a></li>
<li><a href="Numbers.html">Numbers</a></li>
<li><a href="Characters-and-text.html">Characters and text</a></li>
<li><a href="Data-structures.html">Data structures</a></li>
<li><a href="Eval-and-Environments.html">Eval and Environments</a></li>
<li><a href="Debugging.html">Debugging</a></li>
<li>
<b class="toc"><a href="Input-Output.html">Input, output, files</a></b><ul>
<li><b class="toc"><a href="Input-Output.html#Named-output-formats">Named output formats</a></b></li>
<li><b class="toc"><a href="Input-Output.html#Paths">Paths - file name, URLs, and URIs</a></b></li>
<li><b class="toc"><a href="Input-Output.html#Resources">Resources</a></b></li>
<li><b class="toc"><a href="Input-Output.html#Files">File System Interface</a></b></li>
<li><b class="toc"><a href="Input-Output.html#Ports">Ports</a></b></li>
<li><b class="toc"><a href="Input-Output.html#Format">Formatted Output (Common-Lisp-style)</a></b></li>
</ul>
</li>
<li><a href="Types.html">Types</a></li>
<li><a href="Objects-Classes-and-Modules.html">Object, Classes and Modules</a></li>
<li><a href="XML-tools.html">Working with XML and HTML</a></li>
<li><a href="Miscellaneous.html">Miscellaneous topics</a></li>
</ul>
</li>
<li><a href="Development.html">Development</a></li>
<li><a href="Community.html">The Kawa Community</a></li>
<li><a href="About.html">About</a></li>
<li><a href="Overall-Index.html">Index</a></li>
</ul></div>
</div>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="Input-Output"></a>Input, output, and file handling</h2></div></div></div>
<p>Kawa has a number of useful tools for controlling input and output:
</p>
<p>A programmable reader.
</p>
<p>A powerful pretty-printer.
</p>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="Named-output-formats"></a>Named output formats</h3></div></div></div>
<p>The <code class="literal">--output-format</code> (or <code class="literal">--format</code>) command-line switch
can be used to override the default format for how values are
printed on the standard output.  This format is used for values printed
by the read-eval-print interactive interface.  It is also used to
control how values are printed when Kawa evaluates a file named on the
command line (using the <code class="literal">-f</code> flag or a just a script name).
(It also effects applications compiled with the <code class="literal">--main</code> flag.)
It currently effects how values are printed by a <code class="literal">load</code>,
though that may change.
</p>
<p>The default format depends on the current programming language.
For Scheme, the default is <code class="literal">scheme</code> for read-eval-print
interaction, and <code class="literal">ignore</code> for files that are loaded.
</p>
<p>The formats currently supported include the following:
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">scheme</code></dt>
<dd><p>Values are printed in a format matching the Scheme programming language,
as if using <code class="literal">display</code>.  "Groups" or "elements" are written as lists.
</p></dd>
<dt class="term"><code class="literal">readable-scheme</code></dt>
<dd><p>Like <code class="literal">scheme</code>, as if using <code class="literal">write</code>:
Values are generally printed in a way that they can
be read back by a Scheme reader.  For example, strings have quotation marks,
and character values are written like ‘<code class="literal">#\A</code>’.
</p></dd>
<dt class="term"><code class="literal">elisp</code></dt>
<dd><p>Values are printed in a format matching the Emacs Lisp programming language.
Mostly the same as <code class="literal">scheme</code>.
</p></dd>
<dt class="term"><code class="literal">readable-elisp</code></dt>
<dd><p>Like <code class="literal">elisp</code>, but values are generally printed in a way that they can
be read back by an Emacs Lisp reader.  For example, strings have quotation
marks, and character values are written like ‘<code class="literal">?A</code>’.
</p></dd>
<dt class="term"><code class="literal">clisp</code></dt>
<dt class="term"><code class="literal">commonlisp</code></dt>
<dd><p>Values are printed in a format matching the Common Lisp programming language,
as if written by <code class="literal">princ</code>.
Mostly the same as <code class="literal">scheme</code>.
</p></dd>
<dt class="term"><code class="literal">readable-clisp</code></dt>
<dt class="term"><code class="literal">readable-commonlisp</code></dt>
<dd><p>Like <code class="literal">clisp</code>, but as if written by <code class="literal">prin1</code>: values are generally
printed in a way that they can be read back by a Common Lisp reader.
For example, strings have quotation marks, and character values are
written like ‘<code class="literal">#\A</code>’.
</p></dd>
<dt class="term"><code class="literal">xml</code></dt>
<dt class="term"><code class="literal">xhtml</code></dt>
<dt class="term"><code class="literal">html</code></dt>
<dd><p>Values are printed in XML, XHTML, or HTML format.
This is discussed in more detail in <a class="xref" href="XML-tools.html#Formatting-XML" title="Kawa: Formatting XML">the section called “Formatting XML”</a>.
</p></dd>
<dt class="term"><code class="literal">cgi</code></dt>
<dd><p>The output should be a follow the CGI standards.  I.e. assume that this
script is invoked by a web server as a CGI script/program, and that the
output should start with some response header,
followed by the actual response data.
To generate the response headers, use the <code class="literal">response-header</code> function.
If the <code class="literal">Content-type</code> response header has not been specified, and
it is required by the CGI standard, Kawa will attempt
to infer an appropriate <code class="literal">Content-type</code> depending on the following value.
</p></dd>
<dt class="term"><code class="literal">ignore</code></dt>
<dd><p>Top-level values are ignored, instead of printed.
</p></dd>
</dl></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="Paths"></a>Paths - file name, URLs, and URIs</h3></div></div></div>
<p>A <em class="firstterm">Path</em> is the name of a file or some other <em class="firstterm">resource</em>.
The path mechanism provides a layer of abstraction, so you can
use the same functions on either a filename or a URL/URI.
Functions that in standard Scheme take a filename
have been generalized to take a path or a path string,
as if using the <code class="literal">path</code> function below.  For example:
</p>
<pre class="screen">(open-input-file "http://www.gnu.org/index.html")
(open-input-file (URI "ftp://ftp.gnu.org/README"))
</pre>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47132208"></a><code class="function">path</code></p>
<div class="blockquote"><blockquote class="blockquote">
<p>A general path, which can be a <code class="literal">filename</code> or a <code class="literal">URI</code>.
It can be either a <code class="literal">filename</code> or a <code class="literal">URI</code>.
Represented using the abstract Java class <code class="literal">gnu.kawa.io.Path</code>.
</p>
<p>Coercing a value to a <code class="literal">Path</code> is equivalent to
calling the <code class="literal">path</code> constructor documented below.
</p>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47140880"></a><code class="function">path</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Coerces the <em class="replaceable"><code>arg</code></em> to a <code class="literal">path</code>.
If <em class="replaceable"><code>arg</code></em> is already a <code class="literal">path</code>, it is returned unchanged.
If <em class="replaceable"><code>arg</code></em> is a <code class="literal">java.net.URI</code>, or a <code class="literal">java.net.URL</code>
then a <code class="literal">URI</code> value is returned.
If <em class="replaceable"><code>arg</code></em> is a <code class="literal">java.io.File</code>, a <code class="literal">filepath</code> value is returned.
Otherwise, <em class="replaceable"><code>arg</code></em> can be a string.
A <code class="literal">URI</code> value is returned if the string starts with a URI scheme
(such as <code class="literal">"http:"</code>),
and a <code class="literal">filepath</code> value is returned otherwise.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47153712"></a><code class="function">path?</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>True if <em class="replaceable"><code>arg</code></em> is a <code class="literal">path</code> - i.e. an instance of a <code class="literal">gnu.kawa.io.Path</code>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47159072"></a><code class="function">filepath</code></p>
<div class="blockquote"><blockquote class="blockquote"><p>The name of a local file.
Represented using the Java class <code class="literal">gnu.kawa.io.FilePath</code>,
which is a wrapper around <code class="literal">java.io.File</code>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47163776"></a><code class="function">filepath?</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>True if <em class="replaceable"><code>arg</code></em> is a <code class="literal">filepath</code> - i.e. an instance of
a <code class="literal">gnu.kawa.io.FilePath</code>.
</p></blockquote></div>
</div>
<p><a name="URI-type"></a>
</p>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47169888"></a><code class="function">URI</code></p>
<div class="blockquote"><blockquote class="blockquote"><p>A Uniform Resource Indicator, which is a generalization of
the more familiar URL.  The general format is specified by
<a class="ulink" href="http://www.ietf.org/rfc/rfc2396.txt" target="_top">RFC 2396: Uniform Resource Identifiers (URI): Generic Syntax</a>.
Represented using the Java class <code class="literal">gnu.kawa.io.URIPath</code>,
which is a wrapper around <code class="literal">java.net.URI</code>.
A URI can be a URL, or it be a relative URI.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47175440"></a><code class="function">URI?</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>True if <em class="replaceable"><code>arg</code></em> is a <code class="literal">URI</code> - i.e. an instance of
a <code class="literal">gnu.kawa.io.URIPath</code>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47180768"></a><code class="function">URL</code></p>
<div class="blockquote"><blockquote class="blockquote"><p>A Uniform Resource Locator - a subtype of <code class="literal">URI</code>.
Represented using the Java class <code class="literal">gnu.kawa.io.URLPath</code>,
which is a wrapper around a <code class="literal">java.net.URL</code>, in
addition to extending <code class="literal">gnu.kawa.io.URIPath</code>.
</p></blockquote></div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="Extracting-Path-components"></a>Extracting Path components</h4></div></div></div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47187840"></a><code class="function">path-scheme</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns the “URI scheme” of <em class="replaceable"><code>arg</code></em> (coerced to a <code class="literal">path</code>) if it is
defined, or <code class="literal">#f</code> otherwise.  The URI scheme of a <code class="literal">filepath</code>
is <code class="literal">"file"</code> if the <code class="literal">filepath</code> is absolute, and <code class="literal">#f</code> otherwise.
</p>
<pre class="screen">(path-scheme "http://gnu.org/") ⇒ "http"
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47196736"></a><code class="function">path-authority</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns the authority part of <em class="replaceable"><code>arg</code></em> (coerced to a <code class="literal">path</code>) if it is
defined, or <code class="literal">#f</code> otherwise.
The “authority” is usually the hostname, but may also include user-info
or a port-number.
</p>
<pre class="screen">(path-authority "http://me@localhost:8000/home") ⇒ "me@localhost:8000"
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47203072"></a><code class="function">path-host</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns the name name part of <em class="replaceable"><code>arg</code></em> (coerced to a <code class="literal">path</code>) if it is
defined, or <code class="literal">#f</code> otherwise.
</p>
<pre class="screen">(path-host "http://me@localhost:8000/home") ⇒ "localhost"
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47209328"></a><code class="function">path-user-info</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns the “user info” of <em class="replaceable"><code>arg</code></em> (coerced to a <code class="literal">path</code>) if it is
specified, or <code class="literal">#f</code> otherwise.
</p>
<pre class="screen">(path-host "http://me@localhost:8000/home") ⇒ "me"
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47215600"></a><code class="function">path-port</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns the port number of <em class="replaceable"><code>arg</code></em> (coerced to a <code class="literal">path</code>) if it is
specified, or <code class="literal">-1</code> otherwise.  Even if there is a default port
associated with a URI scheme (such as 80 for <code class="literal">http</code>), the value
-1 is returned unless the port number is <span class="emphasis"><em>explictly</em></span> specified.
</p>
<pre class="screen">(path-host "http://me@localhost:8000/home") ⇒ 8000
(path-host "http://me@localhost/home") ⇒ -1
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47223136"></a><code class="function">path-file</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns the “path component” of the <em class="replaceable"><code>arg</code></em>
(coerced to a <code class="literal">path</code>).
(The name <code class="literal">path-path</code> might be more logical,
but it is obviously a bit awkward.)
The path component of a file name is the file name itself.
For a URI, it is the main hierarchical part of the URI,
without schema, authority, query, or fragment.
</p>
<pre class="screen">(path-file "http://gnu.org/home/me.html?add-bug#body") ⇒ "/home/me.html"
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47229568"></a><code class="function">path-directory</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>If <em class="replaceable"><code>arg</code></em> (coerced to a <code class="literal">path</code>) is directory,
return <em class="replaceable"><code>arg</code></em>; otherwise return the “parent” path, without the
final component.
</p>
<pre class="screen">(path-directory "http://gnu.org/home/me/index.html#body")
  ⇒ (path "http://gnu.org/home/me/")
(path-directory "http://gnu.org/home/me/")
  ⇒ (path "http://gnu.org/home/me/")
</pre>
<p><code class="literal">(path-directory "./dir")</code> <code class="literal">⇒</code> <code class="literal">(path "./dir")</code> if <code class="literal">dir</code> is a directory, and <code class="literal">(path ".")</code> otherwise.
</p>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47239312"></a><code class="function">path-parent</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns the “parent directory” of <em class="replaceable"><code>arg</code></em> (coerced to a <code class="literal">path</code>).
If <em class="replaceable"><code>arg</code></em> is not a directory, same as <code class="literal">path-directory <em class="replaceable"><code>arg</code></em></code>.
</p>
<pre class="screen">(path-parent "a/b/c") ⇒ (path "a/b")
(path-parent "file:/a/b/c") ⇒ (path "file:/a/b/c")
(path-parent "file:/a/b/c/") ⇒ (path "file:/a/b/")
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47246240"></a><code class="function">path-last</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>The last component of path component
of <em class="replaceable"><code>arg</code></em> (coerced to a <code class="literal">path</code>).
Returns a substring of <code class="literal">(path-file <em class="replaceable"><code>arg</code></em>)</code>.
If that string ends with ‘<code class="literal">/</code>’ or the path separator,
that last character is ignored.
Returns the tail of the path-string, following
the last (non-final) ‘<code class="literal">/</code>’ or path separator.
</p>
<pre class="screen">(path-last "http:/a/b/c") ⇒ "c"
(path-last "http:/a/b/c/") ⇒ "c"
(path-last "a/b/c") ⇒ "c"
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47253552"></a><code class="function">path-extension</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns the “extension” of the <em class="replaceable"><code>arg</code></em>
(coerced to a <code class="literal">path</code>).
</p>
<pre class="screen">(path-extension "http://gnu.org/home/me.html?add-bug#body") ⇒ "html"
(path-extension "/home/.init") ⇒ #f
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47259024"></a><code class="function">path-query</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns the query part of <em class="replaceable"><code>arg</code></em> (coerced to a <code class="literal">path</code>) if it is
defined, or <code class="literal">#f</code> otherwise.  The query part of a URI is the
part after ‘<code class="literal">?</code>’.
</p>
<pre class="screen">(path-query "http://gnu.org/home?add-bug") ⇒ "add-bug"
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47265808"></a><code class="function">path-fragment</code><em class="replaceable"><code> arg</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns the fragment part of <em class="replaceable"><code>arg</code></em> (coerced to a <code class="literal">path</code>) if it is
defined, or <code class="literal">#f</code> otherwise.  The fragment of a URI is the
part of after ‘<code class="literal">#</code>’.
</p>
<pre class="screen">(path-query "http://gnu.org/home#top") ⇒ "top"
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47272576"></a><code class="function">resolve-uri</code><em class="replaceable"><code> uri</code></em><em class="replaceable"><code> base</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns a <em class="replaceable"><code>uri</code></em> unchanged if it is an absolute URI.
Otherwise resolves it against a base URI <em class="replaceable"><code>base</code></em>,
which is normally (though not always) absolute.
</p></blockquote></div>
</div>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="Resources"></a>Resources</h3></div></div></div>
<p>A resource is a file or other fixed data that an application may access.
Resources are part of the application and are shipped with it, but are
stored in external files.  Examples are images, sounds,
and translation (localization) of messages.
In the Java world a resource is commonly bundled in the same jar file
as the application itself.
</p>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47279520"></a><code class="function">resource-url</code><em class="replaceable"><code> resource-name</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns a <code class="literal">URLPath</code> you can use as a <code class="literal">URL</code>, or
you can pass to it <code class="literal">open-input-file</code> to read the resource data.
The <em class="replaceable"><code>resource-name</code></em> is a string which is passed to the
<code class="literal">ClassLoader</code> of the containing module.
If the module class is in a jar file, things will magically
work if the resource is in the same jar file, and <em class="replaceable"><code>resource-name</code></em>
is a filename relative to the module class in the jar.
If the module is immediately evaluated, the <em class="replaceable"><code>resource-name</code></em> is resolved
against the location of the module source file.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47287536"></a><code class="function">module-uri</code></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Evaluates to a special URI that can be used to access resources
relative to the class of the containing module.
The URI has the form <code class="literal">"class-resource://<em class="replaceable"><code>CurrentClass</code></em>/"</code>
in compiled code, to allow moving the classes/jars.
The current <code class="literal">ClassLoader</code> is associated with the URI, so accessing
resources using the URI will use that <code class="literal">ClassLoader</code>.
Therefore you should not create a <code class="literal">"class-resource:"</code> URI
except by using this function or <code class="literal">resolve-uri</code>,
since that might try to use the wrong <code class="literal">ClassLoader</code>.
</p>
<p>The macro <code class="literal">resource-url</code> works by using <code class="literal">module-uri</code>
and resolving that to a normal <code class="literal">URL</code>.
</p>
</blockquote></div>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="Files"></a>File System Interface</h3></div></div></div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47299792"></a><code class="function">file-exists?</code><em class="replaceable"><code> filename</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns true iff the file named <em class="replaceable"><code>filename</code></em> actually exists.
This function is defined on arbitrary <code class="literal">path</code> values:
for URI values we open a <code class="literal">URLConnection</code>
and invoke <code class="literal">getLastModified()</code>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47305968"></a><code class="function">file-directory?</code><em class="replaceable"><code> filename</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns true iff the file named <em class="replaceable"><code>filename</code></em> actually exists
and is a directory.
This function is defined on arbitrary <code class="literal">path</code> values;
the default implementation for non-file objects is to
return <code class="literal">#t</code> iff the path string ends with the character ‘<code class="literal">/</code>’.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47312192"></a><code class="function">file-readable?</code><em class="replaceable"><code> filename</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns true iff the file named <em class="replaceable"><code>filename</code></em> actually exists
and can be read from.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47316192"></a><code class="function">file-writable?</code><em class="replaceable"><code> filename</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns true iff the file named <em class="replaceable"><code>filename</code></em> actually exists
and can be writen to.
(Undefined if the <em class="replaceable"><code>filename</code></em> does not exist,
but the file can be created in the directory.)
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47320720"></a><code class="function">delete-file</code><em class="replaceable"><code> filename</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Delete the file named <em class="replaceable"><code>filename</code></em>.
On failure, throws an exception.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47324704"></a><code class="function">rename-file</code><em class="replaceable"><code> oldname</code></em><em class="replaceable"><code> newname</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Renames the file named <em class="replaceable"><code>oldname</code></em> to <em class="replaceable"><code>newname</code></em>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47329376"></a><code class="function">copy-file</code><em class="replaceable"><code> oldname</code></em><em class="replaceable"><code> newname-from</code></em><em class="replaceable"><code> path-to</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Copy the file named <em class="replaceable"><code>oldname</code></em> to <em class="replaceable"><code>newname</code></em>.
The return value is unspecified.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47334384"></a><code class="function">create-directory</code><em class="replaceable"><code> dirname</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Create a new directory named <em class="replaceable"><code>dirname</code></em>.
Unspecified what happens on error (such as exiting file with the same name).
(Currently returns <code class="literal">#f</code> on error, but may change to be more compatible
with scsh.)
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47339184"></a><code class="function">system-tmpdir</code></p>
<div class="blockquote"><blockquote class="blockquote"><p>Return the name of the default directory for temporary files.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47342464"></a><code class="function">make-temporary-file</code> [<em class="replaceable"><code>format</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Return a file with a name that does not match any existing file.
Use <em class="replaceable"><code>format</code></em> (which defaults to <code class="literal">"kawa~d.tmp"</code>) to generate
a unique filename in <code class="literal">(system-tmpdir)</code>.
The current implementation is <span class="emphasis"><em>not</em></span> safe from race conditions;
this will be fixed in a future release (using Java2 features).
</p></blockquote></div>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="Ports"></a>Ports</h3></div></div></div>
<p>Ports represent input and output devices.
An input port is a Scheme object that can deliver data upon
command, while an output port is a Scheme object that can
accept data.
</p>
<p>Different <em class="firstterm">port types</em> operate on different data:
</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; ">
<li class="listitem" style="list-style-type: disc"><p>A <em class="firstterm">textual port</em> supports reading or writing of individual
characters from or to a backing store containing characters
using <code class="literal">read-char</code> and <code class="literal">write-char</code> below, and it supports
operations defined in terms of characters, such as <code class="literal">read</code> and
<code class="literal">write</code>.
</p></li>
<li class="listitem" style="list-style-type: disc">
<p>A <em class="firstterm">binary port</em> supports reading or writing of individual
bytes from or to a backing store containing bytes using
<code class="literal">read-u8</code> and <code class="literal">write-u8</code> below, as well as operations defined
in terms of bytes (integers in the range 0 to 255).
</p>
<p>All Kawa binary ports created by procedures documented here
are also textual ports.  Thus you can either read/write
bytes as described above, or read/write
characters whose scalar value is in the range 0 to 255
(i.e. the Latin-1 character set), using <code class="literal">read-char</code> and <code class="literal">write-char</code>.
</p>
<p>A native binary port is a <code class="literal">java.io.InputStream</code>
or <code class="literal">java.io.OutputStream</code> instance.  These are not textual ports.
You can use methods <code class="literal">read-u8</code> and <code class="literal">write-u8</code>,

but not <code class="literal">read-char</code> and <code class="literal">write-char</code> on native binary ports.
(The functions <code class="literal">input-port?</code>, <code class="literal">output-port?</code>, <code class="literal">binary-port?</code>,
and <code class="literal">port?</code> all currently return false on native binary ports,
but that may change.)
</p>
</li>
</ul></div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47368880"></a><code class="function">call-with-port</code><em class="replaceable"><code> port</code></em><em class="replaceable"><code> proc</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>The <code class="literal">call-with-port</code> procedure calls <em class="replaceable"><code>proc</code></em> with port as an
argument. If <em class="replaceable"><code>proc</code></em> returns, then the port is closed automatically
and the values yielded by the proc are returned.
</p>
<p>If <em class="replaceable"><code>proc</code></em> does not return, then the port must not be closed
automatically unless it is possible to prove that the port
will never again be used for a read or write operation.
</p>
<p>As a Kawa extension, <em class="replaceable"><code>port</code></em> may be any object
that implements <code class="literal">java.io.Closeable</code>.
It is an error if <em class="replaceable"><code>proc</code></em> does not accept one argument.
</p>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47379856"></a><code class="function">call-with-input-file</code><em class="replaceable"><code> path</code></em><em class="replaceable"><code> proc</code></em></p>
<p class="synopsis"><a class="indexterm" name="idp47382720"></a><code class="function">call-with-output-file</code><em class="replaceable"><code> path</code></em><em class="replaceable"><code> proc</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>These procedures obtain a textual port obtained by
opening the named file for input or output as if by
<code class="literal">open-input-file</code> or <code class="literal">open-output-file</code>. The port and
<em class="replaceable"><code>proc</code></em> are then passed to a procedure equivalent to
<code class="literal">call-with-port</code>.
</p>
<p>It is an error if <em class="replaceable"><code>proc</code></em> does not accept one argument.
</p>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47390032"></a><code class="function">input-port?</code><em class="replaceable"><code> obj</code></em></p>
<p class="synopsis"><a class="indexterm" name="idp47392608"></a><code class="function">output-port?</code><em class="replaceable"><code> obj</code></em></p>
<p class="synopsis"><a class="indexterm" name="idp47395184"></a><code class="function">textual-port?</code><em class="replaceable"><code> obj</code></em></p>
<p class="synopsis"><a class="indexterm" name="idp47397760"></a><code class="function">binary-port?</code><em class="replaceable"><code> obj</code></em></p>
<p class="synopsis"><a class="indexterm" name="idp47400336"></a><code class="function">port?</code><em class="replaceable"><code> obj</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>These procedures return <code class="literal">#t</code> if obj is an input port, output port,
textual port, binary port, or any kind of port,
respectively. Otherwise they return <code class="literal">#f</code>.
</p>
<p>These procedures currently return <code class="literal">#f</code> on a native Java streams
(<code class="literal">java.io.InputStream</code> or <code class="literal">java.io.OutputStream</code>),
a native reader (a <code class="literal">java.io.Reader</code> that is not an
<code class="literal">gnu.mapping.Inport</code>), or a native writer (a <code class="literal">java.io.Writer</code>
that is not an <code class="literal">gnu.mapping.Outport</code>).  This may change if
conversions between native ports and Scheme ports becomes more seamless.
</p>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47411008"></a><code class="function">input-port-open?</code><em class="replaceable"><code> port</code></em></p>
<p class="synopsis"><a class="indexterm" name="idp47413584"></a><code class="function">output-port-open?</code><em class="replaceable"><code> port</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns <code class="literal">#t</code> if <em class="replaceable"><code>port</code></em> is still open and capable of performing
input or output, respectively, and <code class="literal">#f</code> otherwise.
(Not supported for native binary ports - i.e. <code class="literal">java.io.InputStteam</code>
or <code class="literal">java.io.OutputStream</code>.)
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47420448"></a><code class="function">current-input-port</code></p>
<p class="synopsis"><a class="indexterm" name="idp47422736"></a><code class="function">current-output-port</code></p>
<p class="synopsis"><a class="indexterm" name="idp47425024"></a><code class="function">current-error-port</code></p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns the current default input port, output port, or
error port (an output port), respectively.
(The error port is the the port to which errors and warnings should be sent
- the <em class="firstterm">standard error</em> in Unix and C terminology.)
These procedures are <a class="link" href="Eval-and-Environments.html#Parameter-objects" title="Kawa: Parameter objects">parameter objects</a>,
which can be overridden with <a class="link" href="Eval-and-Environments.html#parameterize-syntax"><code class="literal">parameterize</code></a>.
The initial bindings for these are implementation-defined textual ports.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47431168"></a><code class="function">with-input-from-file</code><em class="replaceable"><code> path</code></em><em class="replaceable"><code> thunk</code></em></p>
<p class="synopsis"><a class="indexterm" name="idp47434032"></a><code class="function">with-output-to-file</code><em class="replaceable"><code> path</code></em><em class="replaceable"><code> thunk</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>The file is opened for input or output as if by
<code class="literal">open-input-file</code> or <code class="literal">open-output-file</code>, and the new port
is made to be the value returned by <code class="literal">current-input-port</code>
or <code class="literal">current-output-port</code> (as used by <code class="literal">(read)</code>,
<code class="literal">(write <em class="replaceable"><code>obj</code></em>)</code>, and so forth). The thunk is then called with no
arguments. When the <em class="replaceable"><code>thunk</code></em> returns, the port is closed
and the previous default is restored. It is an error if <em class="replaceable"><code>thunk</code></em>
does not accept zero arguments. Both procedures return
the values yielded by <em class="replaceable"><code>thunk</code></em>. If an escape procedure is used
to escape from the continuation of these procedures, they
behave exactly as if the current input or output port had
been bound dynamically with <code class="literal">parameterize</code>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47444944"></a><code class="function">open-input-file</code><em class="replaceable"><code> path</code></em></p>
<p class="synopsis"><a class="indexterm" name="idp47447520"></a><code class="function">open-binary-input-file</code><em class="replaceable"><code> path</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Takes a <em class="replaceable"><code>path</code></em> naming an existing file and returns a textual
input port or binary input port that is capable of delivering
data from the file.


</p>
<p>The procedure <code class="literal">open-input-file</code> checks the fluid variable
<a class="link" href="Input-Output.html#port-char-encoding"><code class="literal">port-char-encoding</code></a> to determine how bytes are decoded
into characters.  The procedure <code class="literal">open-binary-input-file</code>
is equivalent to calling <code class="literal">open-input-file</code> with
<code class="literal">port-char-encoding</code> set to <code class="literal">#f</code>.
</p>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47457728"></a><code class="function">open-output-file</code><em class="replaceable"><code> path</code></em></p>
<p class="synopsis"><a class="indexterm" name="idp47460304"></a><code class="function">open-binary-output-file</code><em class="replaceable"><code> path</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Takes a <em class="replaceable"><code>path</code></em> naming an output file to be created and returns
respectively a textual output port or binary output port that is
capable of writing data to a new file by that name. If a
file with the given name already exists, the effect is unspecified.


</p>
<p>The procedure <code class="literal">open-output-file</code> checks the fluid variable
<a class="link" href="Input-Output.html#port-char-encoding"><code class="literal">port-char-encoding</code></a> to determine how characters are
encoded as bytes.  The procedure <code class="literal">open-binary-output-file</code>
is equivalent to calling <code class="literal">open-output-file</code> with
<code class="literal">port-char-encoding</code> set to <code class="literal">#f</code>.
</p>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47470480"></a><code class="function">close-port</code><em class="replaceable"><code> port</code></em></p>
<p class="synopsis"><a class="indexterm" name="idp47473056"></a><code class="function">close-input-port</code><em class="replaceable"><code> port</code></em></p>
<p class="synopsis"><a class="indexterm" name="idp47475632"></a><code class="function">close-output-port</code><em class="replaceable"><code> port</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Closes the resource associated with <em class="replaceable"><code>port</code></em>, rendering the port
incapable of delivering or accepting data. It is an error to
apply the last two procedures to a port which is not an
input or output port, respectively.
(Specifically, <code class="literal">close-input-port</code> requires a <code class="literal">java.io.Reader</code>,
while <code class="literal">close-output-port</code> requires a <code class="literal">java.io.Writer</code>.
In contrast <code class="literal">close-port</code> accepts any object whose class
implements <code class="literal">java.io.Closeable</code>.)




</p>
<p>These routines have no effect if the port has already been
closed.
</p>
</blockquote></div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="String-and-bytevector-ports"></a>String and bytevector ports</h4></div></div></div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47487040"></a><code class="function">open-input-string</code><em class="replaceable"><code> string</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Takes a string and returns a text input port that delivers characters
from the string. The port can be closed by <code class="literal">close-input-port</code>,
though its storage will be reclaimed by the
garbage collector if it becomes inaccessible.
</p>
<pre class="screen">(define p
  (open-input-string "(a . (b c . ())) 34"))

(input-port? p)                 ⇒  #t
(read p)                        ⇒  (a b c)
(read p)                        ⇒  34
(eof-object? (peek-char p))     ⇒  #t
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47492352"></a><code class="function">open-output-string</code></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns an textual output port that will accumulate characters
for retrieval by <code class="literal">get-output-string</code>.
The port can be closed by the procedure <code class="literal">close-output-port</code>,
though its storage will be reclaimed by the garbage collector
if it becomes inaccessible.
</p>
<pre class="screen">(let ((q (open-output-string))
  (x '(a b c)))
    (write (car x) q)
    (write (cdr x) q)
    (get-output-string q))        ⇒  "a(b c)"
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47497920"></a><code class="function">get-output-string</code><em class="replaceable"><code> output-port</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Given an output port created by <code class="literal">open-output-string</code>,
returns a string consisting of the characters that have been
output to the port so far in the order they were output.
If the result string is modified, the effect is unspecified.
</p>
<pre class="screen">(parameterize
    ((current-output-port (open-output-string)))
    (display "piece")
    (display " by piece ")
    (display "by piece.")
    (newline)
    (get-output-string (current-output-port)))
        ⇒ "piece by piece by piece.\n"
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47503456"></a><code class="function">call-with-input-string</code><em class="replaceable"><code> string</code></em><em class="replaceable"><code> proc</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Create an input port that gets its data from <em class="replaceable"><code>string</code></em>,
call <em class="replaceable"><code>proc</code></em> with that port as its one argument, and return
the result from the call of <em class="replaceable"><code>proc</code></em>
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47508672"></a><code class="function">call-with-output-string</code><em class="replaceable"><code> proc</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Create an output port that writes its data to a <em class="replaceable"><code>string</code></em>,
and call <em class="replaceable"><code>proc</code></em> with that port as its one argument.
Return a string consisting of the data written to the port.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47513200"></a><code class="function">open-input-bytevector</code><em class="replaceable"><code> bytevector</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Takes a bytevector and returns a binary input port that
delivers bytes from the bytevector.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47516800"></a><code class="function">open-output-bytevector</code></p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns a binary output port that will accumulate bytes
for retrieval by <code class="literal">get-output-bytevector</code>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47520784"></a><code class="function">get-output-bytevector</code><em class="replaceable"><code> port</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns a bytevector consisting of the bytes that have been
output to the port so far in the order they were output.
It is an error if <em class="replaceable"><code>port</code></em> was not created with <code class="literal">open-output-bytevector</code>.
</p></blockquote></div>
</div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="Input"></a>Input</h4></div></div></div>
<p>If <em class="replaceable"><code>port</code></em> is omitted from any input procedure, it defaults
to the value returned by <code class="literal">(current-input-port)</code>. It is an
error to attempt an input operation on a closed port.
</p>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47528288"></a><code class="function">read</code> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote">
<p>The <code class="literal">read</code> procedure converts external representations of
Scheme objects into the objects themselves. That is, it is
a parser for the non-terminal <a class="link" href="Syntax.html#meta-datum"><em class="replaceable"><code>datum</code></em></a>.
It returns the next object parsable from the
given textual input port, updating port to point to the
first character past the end of the external representation
of the object.
</p>
<p>If an end of file is encountered in the input before any
characters are found that can begin an object, then an
end-of-file object is returned. The port remains open, and
further attempts to read will also return an end-of-file object.
If an end of file is encountered after the beginning of
an object’s external representation, but the external repre-
sentation is incomplete and therefore not parsable, an error

is signaled.
</p>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47535632"></a><code class="function">read-char</code> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns the next character available from the textual input
<em class="replaceable"><code>port</code></em>, updating the port to point to the following character.
If no more characters are available, an end-of-file value is
returned.
</p>
<p>The result type is <code class="literal">character-or-eof</code>.
</p>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47541120"></a><code class="function">peek-char</code> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns the next character available from the textual input <em class="replaceable"><code>port</code></em>,
but <span class="emphasis"><em>without</em></span> updating the port to point to the
following character. If no more characters are available, an
end-of-file value is returned.
</p>
<p>The result type is <code class="literal">character-or-eof</code>.
</p>
<p><span class="emphasis"><em>Note:</em></span> The value returned by a call to <code class="literal">peek-char</code> is the same as
the value that would have been returned by a call to <code class="literal">read-char</code>
with the same <em class="replaceable"><code>port</code></em>. The only difference is that the very next call
to <code class="literal">read-char</code> or <code class="literal">peek-char</code> on that <em class="replaceable"><code>port</code></em> will return the
value returned by the preceding call to <code class="literal">peek-char</code>. In particular, a
call to <code class="literal">peek-char</code> on an interactive port will hang waiting for
input whenever a call to <code class="literal">read-char</code> would have hung.
</p>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47553904"></a><code class="function">read-line</code> [<em class="replaceable"><code>port</code></em> [<em class="replaceable"><code>handle-newline</code></em>]]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Reads a line of input from the textual input <em class="replaceable"><code>port</code></em>.
The <em class="replaceable"><code>handle-newline</code></em> parameter determines what is done with
terminating end-of-line delimiter.
The default, <code class="literal">'trim</code>, ignores the delimiter;
<code class="literal">'peek</code> leaves the delimiter in the input stream;
<code class="literal">'concat</code> appends the delimiter to the returned value;
and <code class="literal">'split</code> returns the delimiter as a second value.
You can use the last three options to tell if the string was
terminated by end-or-line or by end-of-file.
If an end of file is encountered before any end of
line is read, but some characters have been read, a string
containing those characters is returned.
(In this case, <code class="literal">'trim</code>, <code class="literal">'peek</code>, and <code class="literal">'concat</code>
have the same result and effect.  The <code class="literal">'split</code> case returns two
values: The characters read, and the delimiter is an empty string.)
If an end of file is encountered before any characters are read,
an end-of-file object is returned.
For the purpose of this procedure, an
end of line consists of either a linefeed character, a carriage
return character, or a sequence of a carriage return character
followed by a linefeed character.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47565984"></a><code class="function">eof-object?</code><em class="replaceable"><code> obj</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns <code class="literal">#t</code> if <em class="replaceable"><code>obj</code></em> is an end-of-file object,
otherwise returns <code class="literal">#f</code>.
</p>
<p><code class="literal">Performance note</code>: If <em class="replaceable"><code>obj</code></em> has type <code class="literal">character-or-eof</code>,
this is compiled as an <code class="literal">int</code> comparison with -1.
</p>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47574112"></a><code class="function">eof-object</code></p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns an end-of-file object.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47577360"></a><code class="function">char-ready?</code> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote">
<p>Returns <code class="literal">#t</code> if a character is ready on the textual input
<em class="replaceable"><code>port</code></em> and returns <code class="literal">#f</code> otherwise. If char-ready returns <code class="literal">#t</code>
then the next <code class="literal">read-char</code> operation on the given <em class="replaceable"><code>port</code></em> is
guaranteed not to hang. If the port is at end of file then
<code class="literal">char-ready?</code> returns <code class="literal">#t</code>.
</p>
<p><span class="emphasis"><em>Rationale:</em></span> The <code class="literal">char-ready?</code> procedure exists to make it
possible for a program to accept characters from interactive ports
without getting stuck waiting for input. Any input editors as-
sociated with such ports must ensure that characters whose
existence has been asserted by <code class="literal">char-ready?</code> cannot be removed
from the input. If <code class="literal">char-ready?</code> were to return <code class="literal">#f</code> at end of
file, a port at end-of-file would be indistinguishable from an
interactive port that has no ready characters.
</p>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47590224"></a><code class="function">read-string</code><em class="replaceable"><code> k</code></em> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Reads the next <em class="replaceable"><code>k</code></em> characters, or as many as are available
before the end of file, from the textual input <em class="replaceable"><code>port</code></em> into a
newly allocated string in left-to-right order and returns the
string. If no characters are available before the end of file,
an end-of-file object is returned.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47595360"></a><code class="function">read-u8</code> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns the next byte available from the binary input <em class="replaceable"><code>port</code></em>,
updating the <em class="replaceable"><code>port</code></em> to point to the following byte. If no more
bytes are available, an end-of-file object is returned.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47600144"></a><code class="function">peek-u8</code> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns the next byte available from the binary input <em class="replaceable"><code>port</code></em>,
but <span class="emphasis"><em>without</em></span> updating the <em class="replaceable"><code>port</code></em> to point to the following byte.
If no more bytes are available, an end-of-file object is returned.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47605376"></a><code class="function">u8-ready?</code> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns <code class="literal">#t</code> if a byte is ready on the binary input <em class="replaceable"><code>port</code></em> and
returns <code class="literal">#f</code> otherwise. If <code class="literal">u8-ready?</code> returns <code class="literal">#t</code> then the
next <code class="literal">read-u8</code> operation on the given port is guaranteed
not to hang. If the port is at end of file then <code class="literal">u8-ready?</code>
returns <code class="literal">#t</code>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47614592"></a><code class="function">read-bytevector</code><em class="replaceable"><code> k</code></em> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Reads the next <em class="replaceable"><code>k</code></em> bytes, or as many as are available before
the end of file, from the binary input <em class="replaceable"><code>port</code></em> into a newly
allocated bytevector in left-to-right order and returns the
bytevector. If no bytes are available before the end of file,
an end-of-file object is returned.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47619712"></a><code class="function">read-bytevector!</code><em class="replaceable"><code> bytevector</code></em> [<em class="replaceable"><code>start</code></em> [<em class="replaceable"><code>end</code></em> [<em class="replaceable"><code>port</code></em>]]]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Reads the next <em class="replaceable"><code>end</code></em> − <em class="replaceable"><code>start</code></em> bytes, or as many as are
available before the end of file, from the binary input <em class="replaceable"><code>port</code></em>
into <em class="replaceable"><code>bytevector</code></em> in left-to-right order beginning at the <em class="replaceable"><code>start</code></em>
position. If <em class="replaceable"><code>end</code></em> is not supplied, reads until the end of
<em class="replaceable"><code>bytevector</code></em> has been reached. If <em class="replaceable"><code>start</code></em> is not supplied, reads
beginning at position 0. Returns the number of bytes read.
If no bytes are available, an end-of-file object is returned.
</p></blockquote></div>
</div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="Output"></a>Output</h4></div></div></div>
<p>If <em class="replaceable"><code>port</code></em> is omitted from any output procedure, it defaults
to the value returned by <code class="literal">(current-output-port)</code>. It is an
error to attempt an output operation on a closed port.
</p>
<p>The return type of these methods is <code class="literal">void</code>.
</p>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47632208"></a><code class="function">write</code><em class="replaceable"><code> obj</code></em> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote">
<p>Writes a representation of <em class="replaceable"><code>obj</code></em> to the given textual output
<em class="replaceable"><code>port</code></em>. Strings that appear in the written representation
are enclosed in quotation marks, and within those strings
backslash and quotation mark characters are escaped by
backslashes.
Symbols that contain non-ASCII characters
are escaped with vertical lines.
Character objects are written using the <code class="literal">#\</code> notation.
</p>
<p>If <em class="replaceable"><code>obj</code></em> contains cycles which would cause an infinite loop
using the normal written representation, then at least the
objects that form part of the cycle must be represented
using <a class="xref" href="">???</a>. Datum
labels must not be used if there are no cycles.
</p>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47639984"></a><code class="function">write-shared</code><em class="replaceable"><code> obj</code></em> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote"><p>The <code class="literal">write-shared</code> procedure is the same as <code class="literal">write</code>, except
that shared structure must be represented using datum
labels for all pairs and vectors that appear more than once
in the output.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47645632"></a><code class="function">write-simple</code><em class="replaceable"><code> obj</code></em> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote"><p>The <code class="literal">write-simple</code> procedure is the same as <code class="literal">write</code>, except
that shared structure is never represented using datum labels.
This can cause write-simple not to terminate if <em class="replaceable"><code>obj</code></em>
contains circular structure.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47651696"></a><code class="function">display</code><em class="replaceable"><code> obj</code></em> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Writes a representation of <em class="replaceable"><code>obj</code></em> to the given textual output
port. Strings that appear in the written representation
are output as if by <code class="literal">write-string</code> instead of by <code class="literal">write</code>.
Symbols are not escaped. Character objects appear in the
representation as if written by <code class="literal">write-char</code> instead of by
<code class="literal">write</code>.
The <code class="literal">display</code> representation of other objects is unspecified.



</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47661216"></a><code class="function">newline</code> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Writes an end of line to textual output <em class="replaceable"><code>port</code></em>.
This is done using the <code class="literal">println</code> method
of the Java class <code class="literal">java.io.PrintWriter</code>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47666800"></a><code class="function">write-char</code><em class="replaceable"><code> char</code></em> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Writes the character <em class="replaceable"><code>char</code></em> (not an external representation
of the character) to the given textual output <em class="replaceable"><code>port</code></em>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47671792"></a><code class="function">write-string</code><em class="replaceable"><code> string</code></em> [<em class="replaceable"><code>port</code></em> [<em class="replaceable"><code>start</code></em> [<em class="replaceable"><code>end</code></em>]]]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Writes the characters of <em class="replaceable"><code>string</code></em> from <em class="replaceable"><code>start</code></em> to <em class="replaceable"><code>end</code></em>
in left-to-right order to the textual output <em class="replaceable"><code>port</code></em>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47678432"></a><code class="function">write-u8</code><em class="replaceable"><code> byte</code></em> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Writes the <em class="replaceable"><code>byte</code></em> to the given binary output port.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47682960"></a><code class="function">write-bytevector</code><em class="replaceable"><code> bytevector</code></em> [<em class="replaceable"><code>port</code></em> [<em class="replaceable"><code>start</code></em> [<em class="replaceable"><code>end</code></em>]]]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Writes the bytes of <em class="replaceable"><code>bytevector</code></em> from <em class="replaceable"><code>start</code></em> to <em class="replaceable"><code>end</code></em>
in left-to-right order to the binary output <em class="replaceable"><code>port</code></em>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47689584"></a><code class="function">flush-output-port</code> [<em class="replaceable"><code>port</code></em>]</p>
<p class="synopsis"><a class="indexterm" name="idp47692416"></a><code class="function">force-output</code> [<em class="replaceable"><code>port</code></em>]</p>
<div class="blockquote"><blockquote class="blockquote"><p>Forces any pending output on <em class="replaceable"><code>port</code></em> to be delivered to the output file or
device and returns an unspecified value.  If the <em class="replaceable"><code>port</code></em> argument is
omitted it defaults to the value returned by <code class="literal">(current-output-port)</code>.
(The name <code class="literal">force-output</code> is older,
while R6RS added <code class="literal">flush-output-port</code>. They have the same effect.)
</p></blockquote></div>
</div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="Line-numbers-and-other-input-port-properties"></a>Line numbers and other input port properties</h4></div></div></div>
<p>An interactive input port has a prompt procedure associated with it.
The prompt procedure is called before a new line is read.  It is passed
the port as an argument, and returns a string, which gets printed as a prompt.
</p>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47701072"></a><code class="function">input-port-prompter</code><em class="replaceable"><code> port</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Get the prompt procedure associated with <em class="replaceable"><code>port</code></em>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47705040"></a><code class="function">set-input-port-prompter!</code><em class="replaceable"><code> port</code></em><em class="replaceable"><code> prompter</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Set the prompt procedure associated with <em class="replaceable"><code>port</code></em> to <em class="replaceable"><code>prompter</code></em>,
which must be a one-argument procedure taking an input port,
and returning a string.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47709872"></a><code class="function">default-prompter</code><em class="replaceable"><code> port</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>The default prompt procedure.  It returns <code class="literal">"#|kawa:<em class="replaceable"><code>L</code></em>|# "</code>, where
<em class="replaceable"><code>L</code></em> is the current line number of <em class="replaceable"><code>port</code></em>.
When reading a continuation line, the result
is <code class="literal">"#|<em class="replaceable"><code>C</code></em>---:<em class="replaceable"><code>L</code></em>|# "</code>, where <code class="literal">C</code> is the character returned
by <code class="literal">(input-port-read-state <em class="replaceable"><code>port</code></em>)</code>.
The prompt has the form of a comment to make it easier to cut-and-paste.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47718928"></a><code class="function">port-column</code><em class="replaceable"><code> input-port</code></em></p>
<p class="synopsis"><a class="indexterm" name="idp47721504"></a><code class="function">port-line</code><em class="replaceable"><code> input-port</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Return the current column number or line number of <em class="replaceable"><code>input-port</code></em>,
using the current input port if none is specified.
If the number is unknown, the result is <code class="literal">#f</code>.  Otherwise,
the result is a 0-origin integer - i.e. the first character
of the first line is line 0, column 0.  (However, when you
display a file position, for example in an error message,
we recommend you add 1 to get 1-origin integers.  This is
because lines and column numbers traditionally start with
1, and that is what non-programmers will find most natural.)
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47726624"></a><code class="function">set-port-line!</code><em class="replaceable"><code> port</code></em><em class="replaceable"><code> line</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Set (0-origin) line number of the current line of <em class="replaceable"><code>port</code></em> to <em class="replaceable"><code>num</code></em>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47731296"></a><code class="function">input-port-line-number</code><em class="replaceable"><code> port</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Get the line number of the current line of <em class="replaceable"><code>port</code></em>,
which must be a (non-binary) input port.
The initial line is line 1.
Deprecated; replaced by <code class="literal">(+ 1 (port-line <em class="replaceable"><code>port</code></em>))</code>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47736480"></a><code class="function">set-input-port-line-number!</code><em class="replaceable"><code> port</code></em><em class="replaceable"><code> num</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Set line number of the current line of <em class="replaceable"><code>port</code></em> to <em class="replaceable"><code>num</code></em>.
Deprecated;  replaced by <code class="literal">(set-port-line! <em class="replaceable"><code>port</code></em> (- <em class="replaceable"><code>num</code></em> 1))</code>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47742768"></a><code class="function">input-port-column-number</code><em class="replaceable"><code> port</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Get the column number of the current line of <em class="replaceable"><code>port</code></em>,
which must be a (non-binary) input port.
The initial column is column 1.
Deprecated; replaced by <code class="literal">(+ 1 (port-column <em class="replaceable"><code>port</code></em>))</code>.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47747984"></a><code class="function">input-port-read-state</code><em class="replaceable"><code> port</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Returns a character indicating the current <code class="literal">read</code> state of the <em class="replaceable"><code>port</code></em>.
Returns <code class="literal">#\Return</code> if not current doing a <em class="replaceable"><code>read</code></em>,
<code class="literal">#\"</code> if reading a string;  <code class="literal">#\|</code> if reading a comment;  <code class="literal">#\(</code>
if inside a list; and <code class="literal">#\Space</code> when otherwise in a <code class="literal">read</code>.
The result is intended for use by prompt prcedures, and is not necessarily
correct except when reading a new-line.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47757600"></a><code class="varname">symbol-read-case</code></p>
<div class="blockquote"><blockquote class="blockquote"><p>A symbol that controls how <code class="literal">read</code> handles letters when reading a symbol.
If the first letter is ‘<code class="literal">U</code>’, then letters in symbols are upper-cased.
If the first letter is ‘<code class="literal">D</code>’ or ‘<code class="literal">L</code>’, then letters
in symbols are down-cased.
If the first letter is ‘<code class="literal">I</code>’, then the case of letters in symbols
is inverted.
Otherwise (the default), the letter is not changed.
(Letters following a ‘<code class="literal">\</code>’ are always unchanged.)
The value of <code class="literal">symbol-read-case</code> only checked
when a reader is created, not each time a symbol is read.
</p></blockquote></div>
</div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="Miscellaeous"></a>Miscellaeous</h4></div></div></div>
<p><a name="port-char-encoding"></a>
</p>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47767760"></a><code class="varname">port-char-encoding</code></p>
<div class="blockquote"><blockquote class="blockquote">
<p>Controls how bytes in external files are converted to/from internal
Unicode characters.  Can be either a symbol or a boolean.
If <code class="literal">port-char-encoding</code> is <code class="literal">#f</code>, the file is assumed
to be a binary file and no conversion is done.
Otherwise, the file is a text file.  The default is <code class="literal">#t</code>, which
uses a locale-dependent conversion.  If <code class="literal">port-char-encoding</code>
is a symbol, it must be the name of a character encoding known to Java.
For all text files (that is if <code class="literal">port-char-encoding</code> is not <code class="literal">#f</code>),
on input a <code class="literal">#\Return</code> character or
a <code class="literal">#\Return</code> followed by <code class="literal">#\Newline</code>
are converted into plain <code class="literal">#\Newline</code>.
</p>
<p>This variable is checked when the file is opened;  not when actually
reading or writing.  Here is an example of how you can safely
change the encoding temporarily:
</p>
<pre class="screen">(define (open-binary-input-file name)
  (fluid-let ((port-char-encoding #f)) (open-input-file name)))
</pre>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47779360"></a><code class="varname">*print-base*</code></p>
<div class="blockquote"><blockquote class="blockquote"><p>The number base (radix) to use by default when printing rational numbers.
Must be an integer between 2 and 36, and the default is of course 10.
For example setting <code class="literal">*print-base*</code> to 16 produces hexadecimal output.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47783200"></a><code class="varname">*print-radix*</code></p>
<div class="blockquote"><blockquote class="blockquote"><p>If true, prints an indicator of the radix used when printing rational numbers.
If <code class="literal">*print-base*</code> is respectively 2, 8, or 16, then
<code class="literal">#b</code>, <code class="literal">#o</code> or <code class="literal">#x</code> is written before the number;
otherwise <code class="literal">#<em class="replaceable"><code>N</code></em>r</code> is written, where <code class="literal"><em class="replaceable"><code>N</code></em></code> is the base.
An exception is when  <code class="literal">*print-base*</code> is 10, in which case a period
is written <span class="emphasis"><em>after</em></span> the number, to match Common Lisp; this may
be inappropriate for Scheme, so is likely to change.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47792208"></a><code class="varname">*print-right-margin*</code></p>
<div class="blockquote"><blockquote class="blockquote"><p>The right margin (or line width) to use when pretty-printing.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47795216"></a><code class="varname">*print-miser-width*</code></p>
<div class="blockquote"><blockquote class="blockquote"><p>If this an integer, and the available width is less or equal to this value,
then the pretty printer switch to the more <em class="firstterm">miser</em> compact style.
</p></blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47798720"></a><code class="varname">*print-xml-indent*</code></p>
<div class="blockquote"><blockquote class="blockquote"><p>When writing to XML, controls pretty-printing and indentation.
If the value is <code class="literal">'always</code> or  <code class="literal">'yes</code> force each element to
start on a new suitably-indented line.
If the value is <code class="literal">'pretty</code> only force new lines for elements that
won't fit completely on a line.
The the value is <code class="literal">'no</code> or unset, don't add extra whitespace.
</p></blockquote></div>
</div>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="Format"></a>Formatted Output (Common-Lisp-style)</h3></div></div></div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47806384"></a><code class="function">format</code><em class="replaceable"><code> destination</code></em><em class="replaceable"><code> fmt</code></em><em class="replaceable"><code> .</code></em><em class="replaceable"><code> arguments</code></em></p>
<div class="blockquote"><blockquote class="blockquote">
<p>An almost complete implementation of Common LISP format description
according to the CL reference book <em class="citetitle">Common LISP</em> from Guy L.
Steele, Digital Press.  Backward compatible to most of the available
Scheme format implementations.
</p>
<p>Returns <code class="literal">#t</code>, <code class="literal">#f</code> or a string; has side effect of printing
according to <em class="replaceable"><code>fmt</code></em>.  If <em class="replaceable"><code>destination</code></em> is <code class="literal">#t</code>,
the output is to the current output port and <code class="literal">#!void</code> is returned.  If
<em class="replaceable"><code>destination</code></em> is <code class="literal">#f</code>, a formatted string is returned as the
result of the call.  If <em class="replaceable"><code>destination</code></em> is a string,
<em class="replaceable"><code>destination</code></em> is regarded as the format string; <em class="replaceable"><code>fmt</code></em> is
then the first argument and the output is returned as a string. If
<em class="replaceable"><code>destination</code></em> is a number, the output is to the current error port
if available by the implementation. Otherwise <em class="replaceable"><code>destination</code></em> must be
an output port and <code class="literal">#!void</code> is returned.
</p>
<p><em class="replaceable"><code>fmt</code></em> must be a string or an instance of <code class="literal">gnu.text.MessageFormat</code>
or <code class="literal">java.text.MessageFormat</code>.  If <em class="replaceable"><code>fmt</code></em> is a string,
it is parsed as if by <code class="literal">parse-format</code>.
</p>
</blockquote></div>
</div>
<div class="informalfigure">
<p class="synopsis"><a class="indexterm" name="idp47823024"></a><code class="function">parse-format</code><em class="replaceable"><code> format-string</code></em></p>
<div class="blockquote"><blockquote class="blockquote"><p>Parses <code class="literal">format-string</code>, which is a string of the form of a Common LISP
format description.  Returns an instance of <code class="literal">gnu.text.ReportFormat</code>,
which can be passed to the <code class="literal">format</code> function.
</p></blockquote></div>
</div>
<p>A format string passed to <code class="literal">format</code> or <code class="literal">parse-format</code>
consists of format directives (that start with ‘<code class="literal">~</code>’),
and regular characters (that are written directly to the destination).
Most of the Common Lisp (and Slib) format directives are implemented.
Neither justification, nor pretty-printing are supported yet.
</p>
<p>Plus of course, we need documentation for <code class="literal">format</code>!
</p>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="Implemented-CL-Format-Control-Directives"></a>Implemented CL Format Control Directives</h4></div></div></div>
<p>Documentation syntax: Uppercase characters represent the corresponding
control directive characters. Lowercase characters represent control
directive parameter descriptions.
</p>
<div class="variablelist">
<a class="indexterm" name="idp47833376"></a><dl class="variablelist">
<dt class="term"><code class="literal">~A</code></dt>
<dd>
<p>Any (print as <code class="literal">display</code> does).
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~@A</code></dt>
<dd><p>left pad.
</p></dd>
<dt class="term"><code class="literal">~<em class="replaceable"><code>mincol</code></em>,<em class="replaceable"><code>colinc</code></em>,<em class="replaceable"><code>minpad</code></em>,<em class="replaceable"><code>padchar</code></em>A</code></dt>
<dd><p>full padding.
</p></dd>
</dl></div>
<a class="indexterm" name="idp47840944"></a>
</dd>
<dt class="term"><code class="literal">~S</code></dt>
<dd>
<p>S-expression (print as <code class="literal">write</code> does).
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~@S</code></dt>
<dd><p>left pad.
</p></dd>
<dt class="term"><code class="literal">~<em class="replaceable"><code>mincol</code></em>,<em class="replaceable"><code>colinc</code></em>,<em class="replaceable"><code>minpad</code></em>,<em class="replaceable"><code>padchar</code></em>S</code></dt>
<dd><p>full padding.
</p></dd>
</dl></div>
<a class="indexterm" name="idp47848560"></a>
</dd>
<dt class="term"><code class="literal">~C</code></dt>
<dd>
<p>Character.
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~@C</code></dt>
<dd><p>prints a character as the reader can understand it (i.e. <code class="literal">#\</code> prefixing).
</p></dd>
<dt class="term"><code class="literal">~:C</code></dt>
<dd><p>prints a character as emacs does (eg. <code class="literal">^C</code> for ASCII 03).
</p></dd>
</dl></div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="Formatting-Integers"></a>Formatting Integers</h4></div></div></div>
<div class="variablelist">
<a class="indexterm" name="idp47856656"></a><dl class="variablelist">
<dt class="term"><code class="literal">~D</code></dt>
<dd>
<p>Decimal.
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~@D</code></dt>
<dd><p>print number sign always.
</p></dd>
<dt class="term"><code class="literal">~:D</code></dt>
<dd><p>print comma separated.
</p></dd>
<dt class="term"><code class="literal">~<em class="replaceable"><code>mincol</code></em>,<em class="replaceable"><code>padchar</code></em>,<em class="replaceable"><code>commachar</code></em>,<em class="replaceable"><code>commawidth</code></em>D</code></dt>
<dd><p>padding.
</p></dd>
</dl></div>
<a class="indexterm" name="idp47864896"></a>
</dd>
<dt class="term"><code class="literal">~X</code></dt>
<dd>
<p>Hexadecimal.
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~@X</code></dt>
<dd><p>print number sign always.
</p></dd>
<dt class="term"><code class="literal">~:X</code></dt>
<dd><p>print comma separated.
</p></dd>
<dt class="term"><code class="literal">~<em class="replaceable"><code>mincol</code></em>,<em class="replaceable"><code>padchar</code></em>,<em class="replaceable"><code>commachar</code></em>,<em class="replaceable"><code>commawidth</code></em>X</code></dt>
<dd><p>padding.
</p></dd>
</dl></div>
<a class="indexterm" name="idp47873136"></a>
</dd>
<dt class="term"><code class="literal">~O</code></dt>
<dd>
<p>Octal.
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~@O</code></dt>
<dd><p>print number sign always.
</p></dd>
<dt class="term"><code class="literal">~:O</code></dt>
<dd><p>print comma separated.
</p></dd>
<dt class="term"><code class="literal">~<em class="replaceable"><code>mincol</code></em>,<em class="replaceable"><code>padchar</code></em>,<em class="replaceable"><code>commachar</code></em>,<em class="replaceable"><code>commawidth</code></em>O</code></dt>
<dd><p>padding.
</p></dd>
</dl></div>
<a class="indexterm" name="idp47881520"></a>
</dd>
<dt class="term"><code class="literal">~B</code></dt>
<dd>
<p>Binary.
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~@B</code></dt>
<dd><p>print number sign always.
</p></dd>
<dt class="term"><code class="literal">~:B</code></dt>
<dd><p>print comma separated.
</p></dd>
<dt class="term"><code class="literal">~<em class="replaceable"><code>mincol</code></em>,<em class="replaceable"><code>padchar</code></em>,<em class="replaceable"><code>commachar</code></em>,<em class="replaceable"><code>commawidth</code></em>B</code></dt>
<dd><p>padding.
</p></dd>
</dl></div>
<a class="indexterm" name="idp47889856"></a>
</dd>
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>R</code></dt>
<dd>
<p>Radix <em class="replaceable"><code>n</code></em>.
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>,<em class="replaceable"><code>mincol</code></em>,<em class="replaceable"><code>padchar</code></em>,<em class="replaceable"><code>commachar</code></em>,<em class="replaceable"><code>commawidth</code></em>R</code></dt>
<dd><p>padding.
</p></dd>
</dl></div>
</dd>
<dt class="term"><code class="literal">~@R</code></dt>
<dd><p>print a number as a Roman numeral.
</p></dd>
<dt class="term"><code class="literal">~:@R</code></dt>
<dd><p>print a number as an “old fashioned” Roman numeral.
</p></dd>
<dt class="term"><code class="literal">~:R</code></dt>
<dd><p>print a number as an ordinal English number.
</p></dd>
<dt class="term"><code class="literal">~R</code></dt>
<dd><p>print a number as a cardinal English number.
<a class="indexterm" name="idp47902144"></a></p></dd>
<dt class="term"><code class="literal">~P</code></dt>
<dd>
<p>Plural.
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~@P</code></dt>
<dd><p>prints <code class="literal">y</code> and <code class="literal">ies</code>.
</p></dd>
<dt class="term"><code class="literal">~:P</code></dt>
<dd><p>as <code class="literal">~P but jumps 1 argument backward.</code>
</p></dd>
<dt class="term"><code class="literal">~:@P</code></dt>
<dd><p>as <code class="literal">~@P but jumps 1 argument backward.</code>
</p></dd>
</dl></div>
</dd>
</dl>
</div>
<p><em class="replaceable"><code>commawidth</code></em> is the number of characters between two comma characters.
</p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="Formatting-real-numbers"></a>Formatting real numbers</h4></div></div></div>
<div class="variablelist">
<a class="indexterm" name="idp47913600"></a><dl class="variablelist">
<dt class="term"><code class="literal">~F</code></dt>
<dd>
<p>Fixed-format floating-point (prints a flonum like <em class="replaceable"><code>mmm.nnn</code></em>).
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~<em class="replaceable"><code>width</code></em>,<em class="replaceable"><code>digits</code></em>,<em class="replaceable"><code>scale</code></em>,<em class="replaceable"><code>overflowchar</code></em>,<em class="replaceable"><code>padchar</code></em>F</code></dt>
<dd><p></p></dd>
<dt class="term"><code class="literal">~@F</code></dt>
<dd><p>If the number is positive a plus sign is printed.
</p></dd>
</dl></div>
</dd>
</dl>
</div>
<div class="variablelist">
<a class="indexterm" name="idp47921600"></a><dl class="variablelist">
<dt class="term"><code class="literal">~E</code></dt>
<dd>
<p>Exponential floating-point (prints a flonum like <em class="replaceable"><code>mmm.nnn</code></em><code class="literal">E</code><em class="replaceable"><code>ee</code></em>)
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~<em class="replaceable"><code>width</code></em>,<em class="replaceable"><code>digits</code></em>,<em class="replaceable"><code>exponentdigits</code></em>,<em class="replaceable"><code>scale</code></em>,<em class="replaceable"><code>overflowchar</code></em>,<em class="replaceable"><code>padchar</code></em>,<em class="replaceable"><code>exponentchar</code></em>E</code></dt>
<dd><p></p></dd>
<dt class="term"><code class="literal">~@E</code></dt>
<dd><p>If the number is positive a plus sign is printed.
</p></dd>
</dl></div>
</dd>
</dl>
</div>
<div class="variablelist">
<a class="indexterm" name="idp47931312"></a><dl class="variablelist">
<dt class="term"><code class="literal">~G</code></dt>
<dd>
<p>General floating-point (prints a flonum either fixed or exponential).
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~<em class="replaceable"><code>width</code></em>,<em class="replaceable"><code>digits</code></em>,<em class="replaceable"><code>exponentdigits</code></em>,<em class="replaceable"><code>scale</code></em>,<em class="replaceable"><code>overflowchar</code></em>,<em class="replaceable"><code>padchar</code></em>,<em class="replaceable"><code>exponentchar</code></em>G</code></dt>
<dd><p></p></dd>
<dt class="term"><code class="literal">~@G</code></dt>
<dd><p>If the number is positive a plus sign is printed.
</p></dd>
</dl></div>
<p>A slight difference from Common Lisp:  If the number is printed
in fixed form and the fraction is zero,
then a zero digit is printed for the fraction, if allowed by the <em class="replaceable"><code>width</code></em>
and <em class="replaceable"><code>digits</code></em> is unspecified.
</p>
</dd>
</dl>
</div>
<div class="variablelist">
<a class="indexterm" name="idp47941136"></a><dl class="variablelist">
<dt class="term"><code class="literal">~$</code></dt>
<dd>
<p>Dollars floating-point (prints a flonum in fixed with signs separated).
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~<em class="replaceable"><code>digits</code></em>,<em class="replaceable"><code>scale</code></em>,<em class="replaceable"><code>width</code></em>,<em class="replaceable"><code>padchar</code></em>$</code></dt>
<dd><p></p></dd>
<dt class="term"><code class="literal">~@$</code></dt>
<dd><p>If the number is positive a plus sign is printed.
</p></dd>
<dt class="term"><code class="literal">~:@$</code></dt>
<dd><p>A sign is always printed and appears before the padding.
</p></dd>
<dt class="term"><code class="literal">~:$</code></dt>
<dd><p>The sign appears before the padding.
</p></dd>
</dl></div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="Miscellaneous-formatting-operators"></a>Miscellaneous formatting operators</h4></div></div></div>
<div class="variablelist">
<a class="indexterm" name="idp47952176"></a><dl class="variablelist">
<dt class="term"><code class="literal">~%</code></dt>
<dd>
<p>Newline.
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>%</code></dt>
<dd><p>print <em class="replaceable"><code>n</code></em> newlines.
</p></dd>
</dl></div>
<a class="indexterm" name="idp47956784"></a>
</dd>
<dt class="term"><code class="literal">~&amp;</code></dt>
<dd>
<p>print newline if not at the beginning of the output line.
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>&amp;</code></dt>
<dd><p>prints <code class="literal">~&amp;</code> and then <em class="replaceable"><code>n-1</code></em> newlines.
</p></dd>
</dl></div>
<a class="indexterm" name="idp47962304"></a>
</dd>
<dt class="term"><code class="literal">~|</code></dt>
<dd>
<p>Page Separator.
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>|</code></dt>
<dd><p>print <em class="replaceable"><code>n</code></em> page separators.
</p></dd>
</dl></div>
<a class="indexterm" name="idp47966960"></a>
</dd>
<dt class="term"><code class="literal">~~</code></dt>
<dd>
<p>Tilde.
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>~</code></dt>
<dd><p>print <em class="replaceable"><code>n</code></em> tildes.
</p></dd>
</dl></div>
<a class="indexterm" name="idp47971616"></a>
</dd>
<dt class="term">
<code class="literal">~</code>&lt;newline&gt;</dt>
<dd>
<p>Continuation Line.
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term">
<code class="literal">~:</code>&lt;newline&gt;</dt>
<dd><p>newline is ignored, white space left.
</p></dd>
<dt class="term">
<code class="literal">~@</code>&lt;newline&gt;</dt>
<dd><p>newline is left, white space ignored.
</p></dd>
</dl></div>
<a class="indexterm" name="idp47977648"></a>
</dd>
<dt class="term"><code class="literal">~T</code></dt>
<dd>
<p>Tabulation.
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~@T</code></dt>
<dd><p>relative tabulation.
</p></dd>
<dt class="term"><code class="literal">~<em class="replaceable"><code>colnum</code></em>,<em class="replaceable"><code>colinc</code></em>T</code></dt>
<dd><p>full tabulation.
</p></dd>
</dl></div>
<a class="indexterm" name="idp47983664"></a>
</dd>
<dt class="term"><code class="literal">~?</code></dt>
<dd>
<p>Indirection (expects indirect arguments as a list).
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~@?</code></dt>
<dd><p>extracts indirect arguments from format arguments.
</p></dd>
</dl></div>
<a class="indexterm" name="idp47987584"></a>
</dd>
<dt class="term"><code class="literal">~(<em class="replaceable"><code>str</code></em>~)</code></dt>
<dd>
<p>Case conversion (converts by <code class="literal">string-downcase</code>).
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~:(<em class="replaceable"><code>str</code></em>~)</code></dt>
<dd><p>converts by <code class="literal">string-capitalize</code>.
</p></dd>
<dt class="term"><code class="literal">~@(<em class="replaceable"><code>str</code></em>~)</code></dt>
<dd><p>converts by <code class="literal">string-capitalize-first</code>.
</p></dd>
<dt class="term"><code class="literal">~:@(<em class="replaceable"><code>str</code></em>~)</code></dt>
<dd><p>converts by <code class="literal">string-upcase</code>.
</p></dd>
</dl></div>
<a class="indexterm" name="idp47998480"></a>
</dd>
<dt class="term"><code class="literal">~*</code></dt>
<dd>
<p>Argument Jumping (jumps 1 argument forward).
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>*</code></dt>
<dd><p>jumps <em class="replaceable"><code>n</code></em> arguments forward.
</p></dd>
<dt class="term"><code class="literal">~:*</code></dt>
<dd><p>jumps 1 argument backward.
</p></dd>
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>:*</code></dt>
<dd><p>jumps <em class="replaceable"><code>n</code></em> arguments backward.
</p></dd>
<dt class="term"><code class="literal">~@*</code></dt>
<dd><p>jumps to the 0th argument.
</p></dd>
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>@*</code></dt>
<dd><p>jumps to the <em class="replaceable"><code>n</code></em>th argument (beginning from 0)
</p></dd>
</dl></div>
</dd>
<dt class="term"><code class="literal">~[<em class="replaceable"><code>str0</code></em>~;<em class="replaceable"><code>str1</code></em>~;...~;<em class="replaceable"><code>strn</code></em>~]</code></dt>
<dd>
<p>Conditional Expression (numerical clause conditional).
</p>
<div class="variablelist">
<a class="indexterm" name="idp48013136"></a><dl class="variablelist">
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>[</code></dt>
<dd><p>take argument from <em class="replaceable"><code>n</code></em>.
</p></dd>
<dt class="term"><code class="literal">~@[</code></dt>
<dd><p>true test conditional.
</p></dd>
<dt class="term"><code class="literal">~:[</code></dt>
<dd><p>if-else-then conditional.
<a class="indexterm" name="idp48018896"></a></p></dd>
<dt class="term"><code class="literal">~;</code></dt>
<dd><p>clause separator.
</p></dd>
<dt class="term"><code class="literal">~:;</code></dt>
<dd><p>default clause follows.
</p></dd>
</dl>
</div>
</dd>
<dt class="term"><code class="literal">~{<em class="replaceable"><code>str</code></em>~}</code></dt>
<dd>
<p>Iteration (args come from the next argument (a list)).
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>{</code></dt>
<dd><p>at most <em class="replaceable"><code>n</code></em> iterations.
<a class="indexterm" name="idp48026640"></a></p></dd>
<dt class="term"><code class="literal">~:{</code></dt>
<dd><p>args from next arg (a list of lists).
</p></dd>
<dt class="term"><code class="literal">~@{</code></dt>
<dd><p>args from the rest of arguments.
</p></dd>
<dt class="term"><code class="literal">~:@{</code></dt>
<dd><p>args from the rest args (lists).
</p></dd>
</dl></div>
<a class="indexterm" name="idp48031776"></a>
</dd>
<dt class="term"><code class="literal">~^</code></dt>
<dd>
<p>Up and out.
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>^</code></dt>
<dd><p>aborts if <em class="replaceable"><code>n</code></em> = 0
</p></dd>
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>,<em class="replaceable"><code>m</code></em>^</code></dt>
<dd><p>aborts if <em class="replaceable"><code>n</code></em> = <em class="replaceable"><code>m</code></em>
</p></dd>
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>,<em class="replaceable"><code>m</code></em>,<em class="replaceable"><code>k</code></em>^</code></dt>
<dd><p>aborts if <em class="replaceable"><code>n</code></em> &lt;= <em class="replaceable"><code>m</code></em> &lt;= <em class="replaceable"><code>k</code></em>
</p></dd>
</dl></div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="Unimplemented-CL-Format-Control-Directives"></a>Unimplemented CL Format Control Directives</h4></div></div></div>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~:A</code></dt>
<dd><p>print <code class="literal">#f</code> as an empty list (see below).
</p></dd>
<dt class="term"><code class="literal">~:S</code></dt>
<dd><p>print <code class="literal">#f</code> as an empty list (see below).
</p></dd>
<dt class="term"><code class="literal">~&lt;~&gt;</code></dt>
<dd><p>Justification.
</p></dd>
<dt class="term"><code class="literal">~:^</code></dt>
<dd><p></p></dd>
</dl></div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="Extended,-Replaced-and-Additional-Control-Directives"></a>Extended, Replaced and Additional Control Directives</h4></div></div></div>
<p>These are not necesasrily implemented in Kawa!
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~I</code></dt>
<dd><p>print a R4RS complex number as <code class="literal">~F~@Fi</code> with passed parameters for
<code class="literal">~F</code>.
</p></dd>
<dt class="term"><code class="literal">~Y</code></dt>
<dd><p>Pretty print formatting of an argument for scheme code lists.
</p></dd>
<dt class="term"><code class="literal">~K</code></dt>
<dd><p>Same as <code class="literal">~?.</code>
</p></dd>
<dt class="term"><code class="literal">~!</code></dt>
<dd><p>Flushes the output if format <em class="replaceable"><code>destination</code></em> is a port.
</p></dd>
<dt class="term"><code class="literal">~_</code></dt>
<dd>
<p>Print a <code class="literal">#\space</code> character
</p>
<div class="variablelist"><dl class="variablelist">
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>_</code></dt>
<dd><p>print <em class="replaceable"><code>n</code></em> <code class="literal">#\space</code> characters.
</p></dd>
</dl></div>
</dd>
<dt class="term"><code class="literal">~<em class="replaceable"><code>n</code></em>C</code></dt>
<dd><p>Takes <em class="replaceable"><code>n</code></em> as an integer representation for a character. No arguments
are consumed. <em class="replaceable"><code>n</code></em> is converted to a character by
<code class="literal">integer-&gt;char</code>.  <em class="replaceable"><code>n</code></em> must be a positive decimal number.
</p></dd>
<dt class="term"><code class="literal">~:S</code></dt>
<dd><p>Print out readproof.  Prints out internal objects represented as
<code class="literal">#&lt;...&gt;</code> as strings <code class="literal">"#&lt;...&gt;"</code> so that the format output can always
be processed by <code class="literal">read</code>.
</p></dd>
<dt class="term"><code class="literal">~:A</code></dt>
<dd><p>Print out readproof.  Prints out internal objects represented as
<code class="literal">#&lt;...&gt;</code> as strings <code class="literal">"#&lt;...&gt;"</code> so that the format output can always
be processed by <code class="literal">read</code>.
</p></dd>
<dt class="term"><code class="literal">~F, ~E, ~G, ~$</code></dt>
<dd><p>may also print number strings, i.e. passing a number as a string and
format it accordingly.
</p></dd>
</dl></div>
</div>
</div>
</div>
<div class="navfooter">
<ul>
<li><b class="toc"><a href="Input-Output.html#Named-output-formats">Named output formats</a></b></li>
<li><b class="toc"><a href="Input-Output.html#Paths">Paths - file name, URLs, and URIs</a></b></li>
<li><b class="toc"><a href="Input-Output.html#Resources">Resources</a></b></li>
<li><b class="toc"><a href="Input-Output.html#Files">File System Interface</a></b></li>
<li><b class="toc"><a href="Input-Output.html#Ports">Ports</a></b></li>
<li><b class="toc"><a href="Input-Output.html#Format">Formatted Output (Common-Lisp-style)</a></b></li>
</ul>
<p>
          Up: <a accesskey="u" href="Documentation.html">Documentation</a></p>
<p>
        Previous: <a accesskey="p" href="Debugging.html">Debugging</a></p>
<p>
        Next: <a accesskey="n" href="Types.html">Types</a></p>
</div>
</div>
 </body>
</html>
